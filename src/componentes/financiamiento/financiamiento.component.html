<div class="container-fluid financiamiento-container">
  <div class="container">
    <!-- Encabezado -->
    <div class="text-center">
      <h1 class="display-4 financiamiento-title">Financiamiento</h1>
      <p class="financiamiento-subtitle">Calcula tu financiamiento y encuentra el plan perfecto para ti</p>
    </div>

    <div class="row">
      <!-- Calculadora -->
      <div class="col-lg-6 mb-4">
        <div class="calculadora-card">
          <div class="card-body p-4">
            <h2 class="text-center card-title">Calculadora de Financiamiento</h2>

            <!-- Monto del préstamo -->
            <div class="mb-4">
              <label class="form-label">Monto del Préstamo</label>
              <div class="input-group">
                <span class="input-group-text">$</span>
                <input
                  type="number"
                  class="form-control"
                  [(ngModel)]="montoPrestamo"
                  (input)="validarMonto(montoPrestamo)"
                  min="50000"
                  placeholder="Monto mínimo $50,000"
                >
              </div>
              @if (errorMonto) {
                <small class="text-danger">{{errorMonto}}</small>
              }
            </div>

            <!-- Plazo -->
            <div class="mb-4">
              <label class="form-label">Plazo de Financiamiento</label>
              <div class="btn-group w-100" role="group">
                @for (plazo of [24, 36, 48, 60]; track plazo) {
                  <button
                    class="btn btn-plazo"
                    [class.active]="plazoMeses === plazo"
                    (click)="actualizarPlazo(plazo)"
                  >
                    {{plazo}} meses
                  </button>
                }
              </div>
            </div>

            <!-- Tasa de interés -->
            <div class="mb-4">
              <label class="form-label">Tasa de Interés Anual</label>
              <div class="input-group">
                <input
                  type="number"
                  class="form-control"
                  [(ngModel)]="tasaInteres"
                  readonly
                  [ngStyle]="{'background-color': '#e9ecef'}"
                >
                <span class="input-group-text">%</span>
              </div>
            </div>

            <!-- Resultado -->
            @if (pagoMensual > 0) {
              <div class="alert alert-payment">
                <h4 class="alert-heading">Pago Mensual Estimado</h4>
                <p class="mb-0 fs-4">{{pagoMensual | currency:'MXN':'symbol':'1.2-2'}}</p>
              </div>
            }

            <!-- Botón Calcular -->
            <button class="btn btn-calculate w-100" (click)="calcularFinanciamiento()">
              Calcular Financiamiento
            </button>

          </div>
        </div>
      </div>

      <!-- Información Adicional -->
      <div class="col-lg-6">
        <div class="row">
          <!-- Requisitos -->
          <div class="col-md-6 mb-4">
            <div class="info-card">
              <div class="card-body p-4">
                <h3 class="card-title">
                  <i class="bi bi-clipboard-check icon-orange"></i>
                  Requisitos
                </h3>
                <ul class="list-unstyled">
                  <li class="list-item">
                    <i class="bi bi-check-circle-fill icon-orange"></i>
                    Identificación oficial vigente
                  </li>
                  <li class="list-item">
                    <i class="bi bi-check-circle-fill icon-orange"></i>
                    Comprobante de ingresos
                  </li>
                  <li class="list-item">
                    <i class="bi bi-check-circle-fill icon-orange"></i>
                    Comprobante de domicilio
                  </li>
                  <li class="list-item">
                    <i class="bi bi-check-circle-fill icon-orange"></i>
                    Historial crediticio
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Beneficios -->
          <div class="col-md-6 mb-4">
            <div class="info-card">
              <div class="card-body p-4">
                <h3 class="card-title">
                  <i class="bi bi-star icon-orange"></i>
                  Beneficios
                </h3>
                <ul class="list-unstyled">
                  <li class="list-item">
                    <i class="bi bi-check2-circle icon-orange"></i>
                    Tasas competitivas
                  </li>
                  <li class="list-item">
                    <i class="bi bi-check2-circle icon-orange"></i>
                    Plazos flexibles
                  </li>
                  <li class="list-item">
                    <i class="bi bi-check2-circle icon-orange"></i>
                    Proceso rápido
                  </li>
                  <li class="list-item">
                    <i class="bi bi-check2-circle icon-orange"></i>
                    Sin penalización por pago anticipado
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Proceso -->
          <div class="col-12">
            <div class="info-card">
              <div class="card-body p-4">
                <h3 class="card-title">
                  <i class="bi bi-gear icon-orange"></i>
                  Proceso de Financiamiento
                </h3>
                <div class="row text-center">
                  <div class="col-md-3 mb-3">
                    <div class="process-container">
                      <i class="bi bi-1-circle-fill process-icon"></i>
                      <h5 class="process-step">Solicitud</h5>
                      <p class="process-description">Completa el formulario</p>
                    </div>
                  </div>
                  <div class="col-md-3 mb-3">
                    <div class="process-container">
                      <i class="bi bi-2-circle-fill process-icon"></i>
                      <h5 class="process-step">Revisión</h5>
                      <p class="process-description">Evaluación de documentos</p>
                    </div>
                  </div>
                  <div class="col-md-3 mb-3">
                    <div class="process-container">
                      <i class="bi bi-3-circle-fill process-icon"></i>
                      <h5 class="process-step">Aprobación</h5>
                      <p class="process-description">Respuesta en 24 horas</p>
                    </div>
                  </div>
                  <div class="col-md-3 mb-3">
                    <div class="process-container">
                      <i class="bi bi-4-circle-fill process-icon"></i>
                      <h5 class="process-step">Entrega</h5>
                      <p class="process-description">Firma de contrato</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="video-container">
      <h3 class="video-title">Conoce más sobre nuestro financiamiento</h3>
      <div class="video-wrapper">
        <iframe
          [src]="videoUrl | youtubeEmbed"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
      </div>
    </div>
  </div>
</div>
